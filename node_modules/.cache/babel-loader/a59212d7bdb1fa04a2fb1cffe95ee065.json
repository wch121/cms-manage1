{"ast":null,"code":"var _jsxFileName = \"D:\\\\vs code\\\\project\\\\aka\\\\cms\\\\cms-manage\\\\cms-manage1\\\\src\\\\components\\\\Editor.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { PageHeader, Button, message } from 'antd';\nimport E from 'wangeditor';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { ArrowLeftOutlined } from '@ant-design/icons';\nimport MyModal from './MyModal';\nimport moment from 'moment';\nimport { GetArticleByIdApi, EditArticleApi, AddArticleApi } from 'request/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet editor = null;\nconst Editor = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const location = useLocation();\n  const [content, setContent] = useState(\"\");\n  const [modalTitle, setModalTitle] = useState(\"\");\n  const [modalSubTitle, setModalSubTitle] = useState(\"\");\n  //modal显示隐藏控制\n  const [showModal, setShowModal] = useState(false);\n  useEffect(() => {\n    // 富文本编辑器实例化\n    editor = new E(\"#myeditor\");\n    editor.config.onchange = newHtml => {\n      setContent(newHtml);\n    };\n    // 创建\n    editor.create();\n\n    //获取地址栏id\n    if (id) {\n      //id存在，代表编辑文章\n      GetArticleByIdApi({\n        id\n      }).then(res => {\n        if (res.errCode === 0) {\n          message.success(res.message);\n          //设置富文本编辑器的内容\n          // setContent(res.data.content)\n          //富文本编辑器的内置方法解决内容设置\n          editor.txt.html(res.data.content);\n          //设置模态框里的标题\n          setModalTitle(res.data.title);\n          //设置模态框里的副标题\n          setModalSubTitle(res.data.subTitle);\n        } else {\n          message.error(res.message);\n        }\n      });\n    } else {\n      //id不存在，代表要添加文章\n      AddArticleApi({\n        /* \r\n        title:values.title,\r\n        subTitle:values.subTitle, \r\n        content:content,\r\n        等于下一句代码\r\n        */\n        ...values,\n        content\n      }).then(res => {\n        console.log(res);\n        if (res.errCode === 0) {\n          message.success(res.message);\n        }\n      });\n    }\n    return () => {\n      // 组件销毁时销毁编辑器\n      editor.destroy();\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  //模态框点击了提交，触发的ajax请求\n  const submitAticleEdit = values => {\n    //有id调用编辑的接口\n    if (id) {\n      EditArticleApi({\n        /* \r\n        title:values.title,\r\n        subTitle:values.subTitle, \r\n        content:content,\r\n        id:id\r\n        等于下一句代码\r\n        */\n        ...values,\n        content,\n        id\n      }).then(res => {\n        console.log(res);\n        if (res.errCode === 0) {\n          message.success(res.message);\n        }\n      });\n    } else {\n      //没有id调用添加的接口\n      AddArticleApi({\n        ...values,\n        content\n      }).then(res => {\n        console.log(res);\n        if (res.errCode === 0) {\n          message.success(res.message);\n          //关闭模态框\n          setShowModal(false);\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"editor\",\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      style: {\n        padding: 0,\n        marginBottom: '20px'\n      }\n      /* \r\n      /edit/1  有id就有backicon---true\r\n      /edit    没有id就没有backicon---false\r\n        location.pathname==='/edit'?false:true\r\n      */,\n      backIcon: location.pathname === '/edit' ? false : /*#__PURE__*/_jsxDEV(ArrowLeftOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 67\n      }, this),\n      onBack: () => null,\n      ghost: false,\n      title: \"\\u6587\\u7AE0\\u7F16\\u8F91\",\n      subTitle: `当前日期：${moment().format('YYYY-MM-DD')}`,\n      extra: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: () => setShowModal(true),\n        children: \"\\u63D0\\u4EA4\\u6587\\u7AE0\"\n      }, \"3\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }, this)]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"myeditor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n      showModal: showModal,\n      setShowModal: setShowModal,\n      title: modalTitle,\n      subTitle: modalSubTitle,\n      submitAticleEdit: submitAticleEdit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 9\n  }, this);\n};\n_s(Editor, \"OH7SdD37RkI+jaxWX1WIWrLOshM=\", false, function () {\n  return [useParams, useLocation];\n});\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["useEffect","useState","PageHeader","Button","message","E","useLocation","useParams","ArrowLeftOutlined","MyModal","moment","GetArticleByIdApi","EditArticleApi","AddArticleApi","editor","Editor","id","location","content","setContent","modalTitle","setModalTitle","modalSubTitle","setModalSubTitle","showModal","setShowModal","config","onchange","newHtml","create","then","res","errCode","success","txt","html","data","title","subTitle","error","values","console","log","destroy","submitAticleEdit","padding","marginBottom","pathname","format"],"sources":["D:/vs code/project/aka/cms/cms-manage/cms-manage1/src/components/Editor.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { PageHeader, Button, message } from 'antd';\r\nimport E from 'wangeditor'\r\nimport { useLocation, useParams } from 'react-router-dom'\r\nimport { ArrowLeftOutlined } from '@ant-design/icons';\r\nimport MyModal from './MyModal';\r\nimport moment from 'moment'\r\nimport { GetArticleByIdApi, EditArticleApi, AddArticleApi } from 'request/api'\r\n\r\nlet editor = null\r\nconst Editor = () => {\r\n    const { id } = useParams()\r\n    const location = useLocation()\r\n    const [content, setContent] = useState(\"\");\r\n    const [modalTitle, setModalTitle] = useState(\"\");\r\n    const [modalSubTitle, setModalSubTitle] = useState(\"\");\r\n    //modal显示隐藏控制\r\n    const [showModal, setShowModal] = useState(false)\r\n\r\n    useEffect(() => {\r\n        // 富文本编辑器实例化\r\n        editor = new E(\"#myeditor\")\r\n        editor.config.onchange = (newHtml) => {\r\n            setContent(newHtml);\r\n        }\r\n        // 创建\r\n        editor.create()\r\n\r\n        //获取地址栏id\r\n        if (id) {\r\n            //id存在，代表编辑文章\r\n            GetArticleByIdApi({ id }).then(res => {\r\n                if (res.errCode === 0) {\r\n                    message.success(res.message)\r\n                    //设置富文本编辑器的内容\r\n                    // setContent(res.data.content)\r\n                    //富文本编辑器的内置方法解决内容设置\r\n                    editor.txt.html(res.data.content)\r\n                    //设置模态框里的标题\r\n                    setModalTitle(res.data.title);\r\n                    //设置模态框里的副标题\r\n                    setModalSubTitle(res.data.subTitle);\r\n                } else {\r\n                    message.error(res.message)\r\n                }\r\n            })\r\n        } else {\r\n            //id不存在，代表要添加文章\r\n            AddArticleApi({\r\n                /* \r\n                title:values.title,\r\n                subTitle:values.subTitle, \r\n                content:content,\r\n                等于下一句代码\r\n                */\r\n                ...values,\r\n                content,\r\n            }).then(res => {\r\n                console.log(res)\r\n                if (res.errCode === 0) {\r\n                    message.success(res.message);\r\n                }\r\n            })\r\n        }\r\n\r\n        return () => {\r\n            // 组件销毁时销毁编辑器\r\n            editor.destroy()\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    //模态框点击了提交，触发的ajax请求\r\n    const submitAticleEdit = (values) => {\r\n        //有id调用编辑的接口\r\n        if (id) {\r\n            EditArticleApi({\r\n                /* \r\n                title:values.title,\r\n                subTitle:values.subTitle, \r\n                content:content,\r\n                id:id\r\n                等于下一句代码\r\n                */\r\n                ...values,\r\n                content,\r\n                id\r\n            }).then(res => {\r\n                console.log(res)\r\n                if (res.errCode === 0) {\r\n                    message.success(res.message);\r\n                }\r\n            })\r\n        } else {\r\n            //没有id调用添加的接口\r\n            AddArticleApi({\r\n                ...values,\r\n                content,\r\n            }\r\n            ).then(res => {\r\n                console.log(res)\r\n                if (res.errCode === 0) {\r\n                    message.success(res.message);\r\n                    //关闭模态框\r\n                    setShowModal(false);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"editor\">\r\n            <PageHeader\r\n                style={{ padding: 0, marginBottom: '20px' }}\r\n                /* \r\n                /edit/1  有id就有backicon---true\r\n                /edit    没有id就没有backicon---false\r\n\r\n                location.pathname==='/edit'?false:true\r\n                */\r\n                backIcon={location.pathname === '/edit' ? false : <ArrowLeftOutlined />}\r\n                onBack={() => null}\r\n                ghost={false}\r\n                title=\"文章编辑\"\r\n                subTitle={`当前日期：${moment().format('YYYY-MM-DD')}`}\r\n                extra={[\r\n                    <Button key=\"3\" type=\"primary\" onClick={() => setShowModal(true)}>提交文章</Button>,\r\n                ]}\r\n            ></PageHeader>\r\n            <div id=\"myeditor\"></div>\r\n            <MyModal showModal={showModal} setShowModal={setShowModal} title={modalTitle} subTitle={modalSubTitle} submitAticleEdit={submitAticleEdit} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Editor;"],"mappings":"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"},"metadata":{},"sourceType":"module"}