{"ast":null,"code":"var _jsxFileName = \"D:\\\\vs code\\\\project\\\\aka\\\\cms\\\\cms-manage\\\\cms-manage1\\\\src\\\\components\\\\MyHeader.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { DownOutlined } from '@ant-design/icons';\nimport { useNavigate } from 'react-router-dom';\nimport { Dropdown, Menu, message } from 'antd';\nimport \"./less/MyHeader.less\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst logo = require(\"../assets/images/logo.png\");\nconst defaultAvatar = require(\"../assets/images/defaultAvatar.jpg\");\nexport default function MyHeader() {\n  _s();\n  const [avatar, setAvatar] = useState(defaultAvatar);\n  const [username, setUsername] = useState(\"匿名用户\");\n  const navigate = useNavigate();\n\n  //componentDidMount\n  useEffect(() => {\n    if (\"avatar\" !== null) {\n      let avatar1 = \"SERVE_PORT\" + '/' + localStorage.getItem(\"avatar\");\n      setAvatar(avatar1);\n    } else {\n      let avatar1 = defaultAvatar;\n      setAvatar(avatar1);\n    }\n    let username1 = localStorage.getItem(\"username\") || \"匿名用户\";\n    setUsername(username1);\n  }, []);\n\n  //点击修改资料\n  const goMeans = () => {\n    let token = localStorage.getItem(\"cms-token\");\n    if (token) {\n      navigate('/means');\n    } else {\n      //给出提示，并跳转到登录页\n      message.warning(\"登录失败，请重新登录\", 1.5);\n      setTimeout(() => {\n        navigate('/login');\n      }, 1500);\n    }\n  };\n\n  //退出登录\n  const logout = () => {\n    localStorage.removeItem(\"cms-token\");\n    localStorage.removeItem(\"username\");\n    localStorage.removeItem(\"avatar\");\n    //给出提示，并跳转到登录页\n    message.success(\"即将跳转登录页\", 1.5);\n    setTimeout(() => {\n      navigate('/login');\n    }, 1500);\n  };\n  const menu = /*#__PURE__*/_jsxDEV(Menu, {\n    children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: goMeans,\n      children: \"\\u4FEE\\u6539\\u8D44\\u6599\"\n    }, 1, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Menu.Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: logout,\n      children: \"\\u9000\\u51FA\\u767B\\u5F55\"\n    }, 2, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right\",\n      children: /*#__PURE__*/_jsxDEV(Dropdown, {\n        overlay: menu,\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"ant-dropdow-link\",\n          href: \"!#\",\n          onClick: e => e.preventDefault(),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: avatar,\n            className: \"avatar\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(DownOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n_s(MyHeader, \"yn2rfftdx68aj8nRRgc0PUIcaAQ=\", false, function () {\n  return [useNavigate];\n});\n_c = MyHeader;\nvar _c;\n$RefreshReg$(_c, \"MyHeader\");","map":{"version":3,"names":["React","useEffect","useState","DownOutlined","useNavigate","Dropdown","Menu","message","logo","require","defaultAvatar","MyHeader","avatar","setAvatar","username","setUsername","navigate","avatar1","localStorage","getItem","username1","goMeans","token","warning","setTimeout","logout","removeItem","success","menu","e","preventDefault"],"sources":["D:/vs code/project/aka/cms/cms-manage/cms-manage1/src/components/MyHeader.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { DownOutlined } from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Dropdown, Menu, message } from 'antd';\r\nimport \"./less/MyHeader.less\"\r\n\r\nconst logo = require(\"../assets/images/logo.png\")\r\nconst defaultAvatar = require(\"../assets/images/defaultAvatar.jpg\")\r\n\r\n\r\nexport default function MyHeader() {\r\n    const [avatar, setAvatar] = useState(defaultAvatar);\r\n    const [username, setUsername] = useState(\"匿名用户\");\r\n    const navigate = useNavigate()\r\n\r\n    //componentDidMount\r\n    useEffect(() => {\r\n        if (\"avatar\"!==null) {\r\n            let avatar1 = \"SERVE_PORT\"+ '/' + localStorage.getItem(\"avatar\");\r\n            setAvatar(avatar1)\r\n        } else {\r\n            let avatar1 = defaultAvatar;\r\n            setAvatar(avatar1)\r\n        }\r\n        let username1 = localStorage.getItem(\"username\") || \"匿名用户\";\r\n        setUsername(username1)\r\n    }, [])\r\n\r\n    //点击修改资料\r\n    const goMeans = () => {\r\n        let token = localStorage.getItem(\"cms-token\")\r\n        if (token) {\r\n            navigate('/means')\r\n        } else {\r\n            //给出提示，并跳转到登录页\r\n            message.warning(\"登录失败，请重新登录\", 1.5);\r\n            setTimeout(() => {\r\n                navigate('/login')\r\n            }, 1500)\r\n        }\r\n    }\r\n\r\n    //退出登录\r\n    const logout = () => {\r\n        localStorage.removeItem(\"cms-token\");\r\n        localStorage.removeItem(\"username\");\r\n        localStorage.removeItem(\"avatar\");\r\n        //给出提示，并跳转到登录页\r\n        message.success(\"即将跳转登录页\", 1.5);\r\n        setTimeout(() => {\r\n            navigate('/login')\r\n        }, 1500)\r\n    }\r\n\r\n    const menu = (\r\n        <Menu>\r\n            <Menu.Item key={1} onClick={goMeans}>修改资料</Menu.Item>\r\n            <Menu.Divider />\r\n            <Menu.Item key={2} onClick={logout}>退出登录</Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <header>\r\n            <img src={logo}  alt=\"\" />\r\n            <div className=\"right\">\r\n                <Dropdown overlay={menu}>\r\n                <a className=\"ant-dropdow-link\" href=\"!#\" onClick={(e) => e.preventDefault()}>\r\n                    <img src={avatar} className=\"avatar\" alt=\"\" />\r\n                    <span >{username}</span>\r\n                    <DownOutlined />\r\n                </a>\r\n            </Dropdown>\r\n            </div>\r\n            \r\n        </header>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}