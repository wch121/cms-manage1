{"ast":null,"code":"var _jsxFileName = \"D:\\\\vs code\\\\project\\\\aka\\\\cms\\\\cms-manage\\\\cms-manage1\\\\src\\\\pages\\\\NameList.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Button, message, Table } from 'antd';\nimport { EditorApi, ChangeEditorApi } from 'request/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst columns = [{\n  title: '头像',\n  dataIndex: 'avatar',\n  key: 'avatar'\n}, {\n  title: '姓名',\n  dataIndex: 'username',\n  key: 'username'\n}, {\n  title: '角色',\n  dataIndex: 'player',\n  key: 'player'\n}, {\n  title: '编辑权限',\n  dataIndex: 'editable',\n  key: 'editable'\n}, {\n  title: '权限操作',\n  key: 'btns',\n  dataIndex: 'btns',\n  width: '30%'\n}];\n\n//列表数组\n\nconst NameList = () => {\n  _s();\n  const [arr, setArr] = useState([]);\n  const [num, setNum] = useState(0);\n\n  //开通编辑权限\n  const openEditable = id => {\n    ChangeEditorApi({\n      id,\n      open: 1\n    }).then(res => {\n      if (res.errCode === 0) {\n        message.success(res.message);\n        setNum(num + 1);\n      } else {\n        message.error(res.message);\n      }\n    });\n  };\n\n  //取消编辑权限\n  const closeEditable = id => {\n    ChangeEditorApi({\n      id,\n      open: 2\n    }).then(res => {\n      if (res.errCode === 0) {\n        message.success(res.message);\n        setNum(num + 1);\n      } else {\n        message.error(res.message);\n      }\n    });\n  };\n  useEffect(() => {\n    //获取用户列表\n    EditorApi().then(res => {\n      console.log(res);\n      if (res.errCode === 0) {\n        message.success(res.message);\n        let newArr = [];\n        res.data.forEach(item => {\n          let obj = {\n            key: item.id,\n            avatar: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: process.env.SERVER_PORT + '/' + item.avatar,\n              alt: \"\\u5934\\u50CF\",\n              width: \"40\",\n              height: \"40\",\n              style: {\n                borderRadius: '50%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }, this),\n            username: item.username,\n            player: item.player === \"vip\" ? '管理员' : '编辑人员',\n            editable: item.editable === 1 ? '已开通' : '未开通',\n            btns: /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                onClick: () => openEditable(item.id),\n                children: \"\\u5F00\\u901A\\u7F16\\u8F91\\u6743\\u9650\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                danger: true,\n                onClick: () => closeEditable(item.id),\n                children: \"\\u53D6\\u6D88\\u7F16\\u8F91\\u6743\\u9650\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true)\n          };\n          newArr.push(obj);\n        });\n        setArr(newArr);\n      } else {\n        message.error(res.message);\n      }\n    });\n  }, [num]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      dataSource: arr,\n      pagination: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n};\n_s(NameList, \"TMvKB6MVVpulbFVmduM1CK8qukY=\");\n_c = NameList;\nexport default NameList;\nvar _c;\n$RefreshReg$(_c, \"NameList\");","map":{"version":3,"names":["React","useEffect","useState","Button","message","Table","EditorApi","ChangeEditorApi","columns","title","dataIndex","key","width","NameList","arr","setArr","num","setNum","openEditable","id","open","then","res","errCode","success","error","closeEditable","console","log","newArr","data","forEach","item","obj","avatar","process","env","SERVER_PORT","borderRadius","username","player","editable","btns","push"],"sources":["D:/vs code/project/aka/cms/cms-manage/cms-manage1/src/pages/NameList.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Button, message, Table } from 'antd';\r\nimport { EditorApi, ChangeEditorApi } from 'request/api'\r\n\r\ninterface IColumns {\r\n    title: string;\r\n    dataIndex: string;\r\n    key: string;\r\n    width?: string | number;\r\n    // render?: any;\r\n}\r\n\r\nconst columns: IColumns[] = [\r\n    {\r\n        title: '头像',\r\n        dataIndex: 'avatar',\r\n        key: 'avatar',\r\n    },\r\n    {\r\n        title: '姓名',\r\n        dataIndex: 'username',\r\n        key: 'username',\r\n    },\r\n    {\r\n        title: '角色',\r\n        dataIndex: 'player',\r\n        key: 'player',\r\n    },\r\n    {\r\n        title: '编辑权限',\r\n        dataIndex: 'editable',\r\n        key: 'editable',\r\n    },\r\n    {\r\n        title: '权限操作',\r\n        key: 'btns',\r\n        dataIndex: 'btns',\r\n        width: '30%',\r\n    }\r\n];\r\n\r\n//列表数组\r\ninterface IArr {\r\n    key: number;\r\n    avatar: React.ReactNode;\r\n    username: string;\r\n    player: string;\r\n    editable: string;\r\n    btns: React.ReactNode;\r\n}\r\n\r\nconst NameList = () => {\r\n    const [arr, setArr] = useState<IArr[]>([])\r\n    const [num, setNum] = useState(0)\r\n\r\n    //开通编辑权限\r\n    const openEditable = (id: number) => {\r\n        ChangeEditorApi({\r\n            id, open: 1\r\n        }).then((res: any) => {\r\n            if (res.errCode === 0) {\r\n                message.success(res.message)\r\n                setNum(num + 1)\r\n            } else {\r\n                message.error(res.message)\r\n            }\r\n        })\r\n    }\r\n\r\n    //取消编辑权限\r\n    const closeEditable = (id: number) => {\r\n        ChangeEditorApi({\r\n            id, open: 2\r\n        }).then((res: any) => {\r\n            if (res.errCode === 0) {\r\n                message.success(res.message)\r\n                setNum(num + 1)\r\n            } else {\r\n                message.error(res.message)\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        //获取用户列表\r\n        EditorApi().then((res: any) => {\r\n            console.log(res)\r\n            if (res.errCode === 0) {\r\n                message.success(res.message)\r\n                let newArr: IArr[] = [];\r\n                res.data.forEach((item: any) => {\r\n                    let obj = {\r\n                        key: item.id,\r\n                        avatar: <img src={process.env.SERVER_PORT + '/' + item.avatar} alt=\"头像\" width=\"40\" height=\"40\" style={{ borderRadius: '50%' }} />,\r\n                        username: item.username,\r\n                        player: item.player === \"vip\" ? '管理员' : '编辑人员',\r\n                        editable: item.editable === 1 ? '已开通' : '未开通',\r\n                        btns: (\r\n                            <>\r\n                                <Button type=\"primary\" onClick={() => openEditable(item.id)}>开通编辑权限</Button>\r\n                                <Button type=\"primary\" danger onClick={() => closeEditable(item.id)}>取消编辑权限</Button>\r\n                            </>\r\n                        ),\r\n                    }\r\n                    newArr.push(obj)\r\n                })\r\n                setArr(newArr);\r\n            } else {\r\n                message.error(res.message)\r\n            }\r\n        })\r\n    }, [num])\r\n    return (\r\n        <div>\r\n            <Table columns={columns} dataSource={arr} pagination={false} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NameList"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,MAAM,EAAEC,OAAO,EAAEC,KAAK,QAAQ,MAAM;AAC7C,SAASC,SAAS,EAAEC,eAAe,QAAQ,aAAa;AAAA;AAAA;AAUxD,MAAMC,OAAmB,GAAG,CACxB;EACIC,KAAK,EAAE,IAAI;EACXC,SAAS,EAAE,QAAQ;EACnBC,GAAG,EAAE;AACT,CAAC,EACD;EACIF,KAAK,EAAE,IAAI;EACXC,SAAS,EAAE,UAAU;EACrBC,GAAG,EAAE;AACT,CAAC,EACD;EACIF,KAAK,EAAE,IAAI;EACXC,SAAS,EAAE,QAAQ;EACnBC,GAAG,EAAE;AACT,CAAC,EACD;EACIF,KAAK,EAAE,MAAM;EACbC,SAAS,EAAE,UAAU;EACrBC,GAAG,EAAE;AACT,CAAC,EACD;EACIF,KAAK,EAAE,MAAM;EACbE,GAAG,EAAE,MAAM;EACXD,SAAS,EAAE,MAAM;EACjBE,KAAK,EAAE;AACX,CAAC,CACJ;;AAED;;AAUA,MAAMC,QAAQ,GAAG,MAAM;EAAA;EACnB,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGb,QAAQ,CAAS,EAAE,CAAC;EAC1C,MAAM,CAACc,GAAG,EAAEC,MAAM,CAAC,GAAGf,QAAQ,CAAC,CAAC,CAAC;;EAEjC;EACA,MAAMgB,YAAY,GAAIC,EAAU,IAAK;IACjCZ,eAAe,CAAC;MACZY,EAAE;MAAEC,IAAI,EAAE;IACd,CAAC,CAAC,CAACC,IAAI,CAAEC,GAAQ,IAAK;MAClB,IAAIA,GAAG,CAACC,OAAO,KAAK,CAAC,EAAE;QACnBnB,OAAO,CAACoB,OAAO,CAACF,GAAG,CAAClB,OAAO,CAAC;QAC5Ba,MAAM,CAACD,GAAG,GAAG,CAAC,CAAC;MACnB,CAAC,MAAM;QACHZ,OAAO,CAACqB,KAAK,CAACH,GAAG,CAAClB,OAAO,CAAC;MAC9B;IACJ,CAAC,CAAC;EACN,CAAC;;EAED;EACA,MAAMsB,aAAa,GAAIP,EAAU,IAAK;IAClCZ,eAAe,CAAC;MACZY,EAAE;MAAEC,IAAI,EAAE;IACd,CAAC,CAAC,CAACC,IAAI,CAAEC,GAAQ,IAAK;MAClB,IAAIA,GAAG,CAACC,OAAO,KAAK,CAAC,EAAE;QACnBnB,OAAO,CAACoB,OAAO,CAACF,GAAG,CAAClB,OAAO,CAAC;QAC5Ba,MAAM,CAACD,GAAG,GAAG,CAAC,CAAC;MACnB,CAAC,MAAM;QACHZ,OAAO,CAACqB,KAAK,CAACH,GAAG,CAAClB,OAAO,CAAC;MAC9B;IACJ,CAAC,CAAC;EACN,CAAC;EAEDH,SAAS,CAAC,MAAM;IACZ;IACAK,SAAS,EAAE,CAACe,IAAI,CAAEC,GAAQ,IAAK;MAC3BK,OAAO,CAACC,GAAG,CAACN,GAAG,CAAC;MAChB,IAAIA,GAAG,CAACC,OAAO,KAAK,CAAC,EAAE;QACnBnB,OAAO,CAACoB,OAAO,CAACF,GAAG,CAAClB,OAAO,CAAC;QAC5B,IAAIyB,MAAc,GAAG,EAAE;QACvBP,GAAG,CAACQ,IAAI,CAACC,OAAO,CAAEC,IAAS,IAAK;UAC5B,IAAIC,GAAG,GAAG;YACNtB,GAAG,EAAEqB,IAAI,CAACb,EAAE;YACZe,MAAM,eAAE;cAAK,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,WAAW,GAAG,GAAG,GAAGL,IAAI,CAACE,MAAO;cAAC,GAAG,EAAC,cAAI;cAAC,KAAK,EAAC,IAAI;cAAC,MAAM,EAAC,IAAI;cAAC,KAAK,EAAE;gBAAEI,YAAY,EAAE;cAAM;YAAE;cAAA;cAAA;cAAA;YAAA,QAAG;YACjIC,QAAQ,EAAEP,IAAI,CAACO,QAAQ;YACvBC,MAAM,EAAER,IAAI,CAACQ,MAAM,KAAK,KAAK,GAAG,KAAK,GAAG,MAAM;YAC9CC,QAAQ,EAAET,IAAI,CAACS,QAAQ,KAAK,CAAC,GAAG,KAAK,GAAG,KAAK;YAC7CC,IAAI,eACA;cAAA,wBACI,QAAC,MAAM;gBAAC,IAAI,EAAC,SAAS;gBAAC,OAAO,EAAE,MAAMxB,YAAY,CAACc,IAAI,CAACb,EAAE,CAAE;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QAAgB,eAC5E,QAAC,MAAM;gBAAC,IAAI,EAAC,SAAS;gBAAC,MAAM;gBAAC,OAAO,EAAE,MAAMO,aAAa,CAACM,IAAI,CAACb,EAAE,CAAE;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QAAgB;YAAA;UAGhG,CAAC;UACDU,MAAM,CAACc,IAAI,CAACV,GAAG,CAAC;QACpB,CAAC,CAAC;QACFlB,MAAM,CAACc,MAAM,CAAC;MAClB,CAAC,MAAM;QACHzB,OAAO,CAACqB,KAAK,CAACH,GAAG,CAAClB,OAAO,CAAC;MAC9B;IACJ,CAAC,CAAC;EACN,CAAC,EAAE,CAACY,GAAG,CAAC,CAAC;EACT,oBACI;IAAA,uBACI,QAAC,KAAK;MAAC,OAAO,EAAER,OAAQ;MAAC,UAAU,EAAEM,GAAI;MAAC,UAAU,EAAE;IAAM;MAAA;MAAA;MAAA;IAAA;EAAG;IAAA;IAAA;IAAA;EAAA,QAC7D;AAEd,CAAC;AAAA,GAlEKD,QAAQ;AAAA,KAARA,QAAQ;AAoEd,eAAeA,QAAQ;AAAA;AAAA"},"metadata":{},"sourceType":"module"}