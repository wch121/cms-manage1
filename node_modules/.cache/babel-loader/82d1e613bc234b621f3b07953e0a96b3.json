{"ast":null,"code":"var _jsxFileName = \"D:\\\\vs code\\\\project\\\\aka\\\\cms\\\\cms-manage\\\\cms-manage1\\\\src\\\\pages\\\\ListTable.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './less/ListTable.less';\nimport { Table, Button, Space, message } from 'antd';\nimport moment from 'moment';\nimport { ArticleListApi, ArticleDelApi } from '../request/api';\nimport { useNavigate } from 'react-router-dom';\n\n// 标题组件\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MyTitle(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      className: \"table_title\",\n      href: \"http://codesohigh.com:8765/article/\" + props.id,\n      target: \"_blank\",\n      children: props.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: '#999'\n      },\n      children: props.subTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 9\n  }, this);\n}\n_c = MyTitle;\nexport default function ListTable() {\n  _s();\n  // 列表数组\n  const [arr, setArr] = useState([]);\n  const navigate = useNavigate();\n  // 分页\n  const [pagination, setPagination] = useState({\n    current: 1,\n    pageSize: 10,\n    total: 0\n  });\n\n  // 提取请求的代码\n  const getArticleList = (current, pageSize) => {\n    ArticleListApi({\n      num: current,\n      count: pageSize\n    }).then(res => {\n      if (res.errCode === 0) {\n        // 更改pagination\n        let {\n          num,\n          count,\n          total\n        } = res.data;\n        setPagination({\n          current: num,\n          pageSize: count,\n          total\n        });\n        // 深拷贝获取到的数组\n        let newArr = JSON.parse(JSON.stringify(res.data.arr));\n        // 声明一个空数组\n        let myarr = [];\n        /* \n            1. 要给每个数组项加key，让key=id\n            2. 需要有一套标签结构，赋予一个属性\n        */\n        newArr.map(item => {\n          let obj = {\n            key: item.id,\n            date: moment(item.date).format(\"YYYY-MM-DD hh:mm:ss\"),\n            mytitle: /*#__PURE__*/_jsxDEV(MyTitle, {\n              id: item.id,\n              title: item.title,\n              subTitle: item.subTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 34\n            }, this)\n          };\n          myarr.push(obj);\n        });\n        setArr(myarr);\n      }\n    });\n  };\n\n  // 请求文章列表(mounted)\n  useEffect(() => {\n    getArticleList(pagination.current, pagination.pageSize);\n  }, []);\n\n  // 分页的函数\n  const pageChange = arg => getArticleList(arg.current, arg.pageSize);\n\n  // 删除\n  const delFn = id => {\n    ArticleDelApi({\n      id\n    }).then(res => {\n      if (res.errCode === 0) {\n        message.success(res.message);\n        // 重新刷页面，要么重新请求这个列表的数据   window.reload   调用getList(1)  增加变量的检测\n        getArticleList(1, pagination.pageSize);\n      } else {\n        message.success(res.message);\n      }\n    });\n  };\n\n  // 每一列\n  const columns = [{\n    dataIndex: 'mytitle',\n    key: 'mytitle',\n    width: '60%',\n    render: text => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }, this)\n  }, {\n    dataIndex: 'date',\n    key: 'date',\n    render: text => /*#__PURE__*/_jsxDEV(\"p\", {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }, this)\n  }, {\n    key: 'action',\n    render: text => {\n      return /*#__PURE__*/_jsxDEV(Space, {\n        size: \"middle\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          onClick: () => navigate('/edit/' + text.key),\n          children: \"\\u7F16\\u8F91\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"danger\",\n          onClick: () => delFn(text.key),\n          children: \"\\u5220\\u9664\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this);\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"list_table\",\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      showHeader: false,\n      columns: columns,\n      dataSource: arr,\n      onChange: pageChange,\n      pagination: pagination\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n}\n_s(ListTable, \"U4VuFNCofayrMJ/6BGwBzzUAohI=\", false, function () {\n  return [useNavigate];\n});\n_c2 = ListTable;\nvar _c, _c2;\n$RefreshReg$(_c, \"MyTitle\");\n$RefreshReg$(_c2, \"ListTable\");","map":{"version":3,"names":["React","useState","useEffect","Table","Button","Space","message","moment","ArticleListApi","ArticleDelApi","useNavigate","MyTitle","props","id","title","color","subTitle","ListTable","arr","setArr","navigate","pagination","setPagination","current","pageSize","total","getArticleList","num","count","then","res","errCode","data","newArr","JSON","parse","stringify","myarr","map","item","obj","key","date","format","mytitle","push","pageChange","arg","delFn","success","columns","dataIndex","width","render","text"],"sources":["D:/vs code/project/aka/cms/cms-manage/cms-manage1/src/pages/ListTable.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './less/ListTable.less'\nimport { Table, Button, Space, message } from 'antd';\nimport moment from 'moment'\nimport { ArticleListApi, ArticleDelApi } from '../request/api'\nimport { useNavigate } from 'react-router-dom'\n\n// 标题组件\nfunction MyTitle(props) {\n    return (\n        <div>\n            <a className='table_title' href={\"http://codesohigh.com:8765/article/\" + props.id} target=\"_blank\">{props.title}</a>\n            <p style={{ color: '#999' }}>{props.subTitle}</p>\n        </div>\n    )\n}\n\nexport default function ListTable() {\n    // 列表数组\n    const [arr, setArr] = useState([])\n    const navigate = useNavigate()\n    // 分页\n    const [pagination, setPagination] = useState({ current: 1, pageSize: 10, total: 0 })\n\n    // 提取请求的代码\n    const getArticleList = (current, pageSize) => {\n        ArticleListApi({\n            num: current,\n            count: pageSize\n        }).then(res => {\n            if (res.errCode === 0) {\n                // 更改pagination\n                let { num, count, total } = res.data;\n                setPagination({ current: num, pageSize: count, total })\n                // 深拷贝获取到的数组\n                let newArr = JSON.parse(JSON.stringify(res.data.arr));\n                // 声明一个空数组\n                let myarr = []\n                /* \n                    1. 要给每个数组项加key，让key=id\n                    2. 需要有一套标签结构，赋予一个属性\n                */\n                newArr.map(item => {\n                    let obj = {\n                        key: item.id,\n                        date: moment(item.date).format(\"YYYY-MM-DD hh:mm:ss\"),\n                        mytitle: <MyTitle id={item.id} title={item.title} subTitle={item.subTitle} />\n                    }\n                    myarr.push(obj)\n                })\n                setArr(myarr)\n            }\n        })\n    }\n\n    // 请求文章列表(mounted)\n    useEffect(() => {\n        getArticleList(pagination.current, pagination.pageSize);\n    }, [])\n\n    // 分页的函数\n    const pageChange = (arg) => getArticleList(arg.current, arg.pageSize);\n\n    // 删除\n    const delFn = (id) => {\n        ArticleDelApi({ id }).then(res => {\n            if (res.errCode === 0) {\n                message.success(res.message)\n                // 重新刷页面，要么重新请求这个列表的数据   window.reload   调用getList(1)  增加变量的检测\n                getArticleList(1, pagination.pageSize);\n            } else {\n                message.success(res.message)\n            }\n        })\n    }\n\n    // 每一列\n    const columns = [\n        {\n            dataIndex: 'mytitle',\n            key: 'mytitle',\n            width: '60%',\n            render: text => <div>{text}</div>\n        },\n        {\n            dataIndex: 'date',\n            key: 'date',\n            render: text => <p>{text}</p>,\n        },\n        {\n            key: 'action',\n            render: text => {\n                return (\n                    <Space size=\"middle\">\n                        {/* text.key就是id */}\n                        <Button type='primary' onClick={() => navigate('/edit/' + text.key)}>编辑</Button>\n                        <Button type='danger' onClick={()=>delFn(text.key)}>删除</Button>\n                    </Space>\n                )\n            },\n        },\n    ];\n\n    return (\n        <div className='list_table'>\n            <Table\n                showHeader={false}\n                columns={columns}\n                dataSource={arr}\n                onChange={pageChange}\n                pagination={pagination}\n            />\n        </div>\n    )\n}\n\n\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}