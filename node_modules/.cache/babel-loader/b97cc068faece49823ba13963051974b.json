{"ast":null,"code":"var _jsxFileName = \"D:\\\\vs code\\\\project\\\\aka\\\\cms\\\\cms-manage\\\\cms-manage1\\\\src\\\\pages\\\\ListList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { List, Skeleton, Pagination, Button, message } from 'antd';\nimport { ArticleListApi, ArticleDelApi } from '../request/api';\nimport { useNavigate } from 'react-router-dom';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ListList() {\n  _s();\n  const [list, setList] = useState([]);\n  const navigate = useNavigate();\n  const [update, setUpdate] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [current, setCurrent] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n\n  // 请求封装\n  const getList = num => {\n    ArticleListApi({\n      num,\n      count: pageSize\n    }).then(res => {\n      if (res.errCode === 0) {\n        let {\n          arr,\n          total,\n          num,\n          count\n        } = res.data;\n        setList(arr);\n        setTotal(total);\n        setCurrent(num);\n        setPageSize(count);\n      }\n    });\n  };\n\n  // 请求列表数据  componentDidMount\n  useEffect(() => {\n    getList(current);\n  }, []);\n\n  // 模拟componentDidUpdate\n  useEffect(() => {\n    getList(current);\n  }, [update]);\n\n  // 分页\n  const onChange = pages => {\n    getList(pages);\n  };\n\n  // 删除\n  const delFn = id => {\n    ArticleDelApi({\n      id\n    }).then(res => {\n      if (res.errCode === 0) {\n        message.success(res.message);\n        // 重新刷页面，要么重新请求这个列表的数据   window.reload   调用getList(1)  增加变量的检测\n        setUpdate(update + 1);\n      } else {\n        message.success(res.message);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"list_table\",\n    style: {\n      padding: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(List, {\n      className: \"demo-loadmore-list\",\n      itemLayout: \"horizontal\",\n      dataSource: list,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        actions: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          onClick: () => navigate('/edit/' + item.id),\n          children: \"\\u7F16\\u8F91\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"danger\",\n          onClick: () => delFn(item.id),\n          children: \"\\u5220\\u9664\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this)],\n        children: /*#__PURE__*/_jsxDEV(Skeleton, {\n          loading: false,\n          children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n            title: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"!#\",\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 24\n            }, this),\n            description: item.subTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: moment(item.date).format(\"YYYY-MM-DD hh:mm:ss\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      style: {\n        float: 'right',\n        marginTop: '20px'\n      },\n      onChange: onChange,\n      total: total,\n      current: current,\n      pageSize: pageSize\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(ListList, \"uDQrA/J+tJX9srtmgQ8odcw4Qgg=\", false, function () {\n  return [useNavigate];\n});\n_c = ListList;\nvar _c;\n$RefreshReg$(_c, \"ListList\");","map":{"version":3,"names":["React","useState","useEffect","List","Skeleton","Pagination","Button","message","ArticleListApi","ArticleDelApi","useNavigate","moment","ListList","list","setList","navigate","update","setUpdate","total","setTotal","current","setCurrent","pageSize","setPageSize","getList","num","count","then","res","errCode","arr","data","onChange","pages","delFn","id","success","padding","item","title","subTitle","date","format","float","marginTop"],"sources":["D:/vs code/project/aka/cms/cms-manage/cms-manage1/src/pages/ListList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { List, Skeleton, Pagination, Button, message } from 'antd';\nimport { ArticleListApi, ArticleDelApi } from '../request/api'\nimport {useNavigate} from 'react-router-dom'\nimport moment from 'moment'\n\nexport default function ListList() {\n  const [list, setList] = useState([])\n  const navigate = useNavigate()\n  const [update, setUpdate] = useState(1)\n  const [total, setTotal] = useState(0)\n  const [current, setCurrent] = useState(1)\n  const [pageSize, setPageSize] = useState(10)\n\n  // 请求封装\n  const getList = (num) => {\n    ArticleListApi({\n      num,\n      count: pageSize\n    }).then(res => {\n      if (res.errCode === 0) {\n        let { arr, total, num, count } = res.data;\n        setList(arr);\n        setTotal(total);\n        setCurrent(num);\n        setPageSize(count);\n      }\n    })\n  }\n\n  // 请求列表数据  componentDidMount\n  useEffect(() => {\n    getList(current)\n  }, [])\n\n  // 模拟componentDidUpdate\n  useEffect(() => {\n    getList(current)\n  }, [update])\n\n  // 分页\n  const onChange = (pages) => {\n    getList(pages);\n  }\n\n  // 删除\n  const delFn = (id) => {\n    ArticleDelApi({id}).then(res=>{\n      if(res.errCode===0){\n        message.success(res.message)\n        // 重新刷页面，要么重新请求这个列表的数据   window.reload   调用getList(1)  增加变量的检测\n        setUpdate(update+1)\n      }else{\n        message.success(res.message)\n      }\n    })\n  }\n\n  return (\n    <div className='list_table' style={{ padding: '20px' }}>\n      <List\n        className=\"demo-loadmore-list\"\n        itemLayout=\"horizontal\"\n        dataSource={list}\n        renderItem={item => (\n          <List.Item\n            actions={[\n              <Button type='primary' onClick={()=>navigate('/edit/'+item.id)}>编辑</Button>, \n              <Button type='danger' onClick={()=>delFn(item.id)}>删除</Button>\n            ]}\n          >\n            <Skeleton loading={false}>\n              <List.Item.Meta\n                title={<a href=\"!#\">{item.title}</a>}\n                description={item.subTitle}\n              />\n              <div>{moment(item.date).format(\"YYYY-MM-DD hh:mm:ss\")}</div>\n            </Skeleton>\n          </List.Item>\n        )}\n      />\n      <Pagination style={{float: 'right',marginTop: '20px'}} onChange={onChange} total={total} current={current} pageSize={pageSize} />\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}